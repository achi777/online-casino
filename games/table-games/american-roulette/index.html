<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>American Roulette ðŸ’°</title>
    <style>
        html {
            padding-left: 64px;
            padding-right: 64px;
            padding-top: 64px;
        }
        body {
            background: #3d0a91;
            margin: 0 auto;
            font-family: 'Roboto', sans-serif;
        }

        .container {
            display: flex;
        }

        .box1,
        .box2 {
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
        }

        .box1 {
            flex-basis: 100%;
        }

        .box2 {
            flex-basis: 100%;
        }

        @media screen and (max-width: 768px) {
            .container {
                flex-direction: column;
                height: 100vh;
            }

            .box1,
            .box2 {
                flex-basis: 50%;
                height: 50%;
            }
        }

        @media screen and (min-width: 769px) {
            .container {
                flex-direction: row;
                height: 100%;
            }

            .box1 {
                flex-basis: 30%;
                height: 100%;
            }

            .box2 {
                flex-basis: 70%;
                height: 100%;
            }
        }

        #rouletteWheel {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .roll {
            position: fixed;
            bottom: 120px;
            right: 40px;
            height: 90px;
            width: 90px;
            border-radius: 50%;
            box-shadow:
                0px 8px 16px rgba(0, 0, 0, 0.9),
                0px 0px 20px rgba(255, 215, 0, 0.4),
                inset 0px 2px 4px rgba(255, 255, 255, 0.3);
            border: 4px solid #FFD700;
            cursor: pointer;
            font-weight: 900;
            font-size: 16px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF8C00 100%);
            color: #000;
            z-index: 100;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow:
                    0px 8px 16px rgba(0, 0, 0, 0.9),
                    0px 0px 20px rgba(255, 215, 0, 0.4),
                    inset 0px 2px 4px rgba(255, 255, 255, 0.3);
            }
            50% {
                box-shadow:
                    0px 8px 16px rgba(0, 0, 0, 0.9),
                    0px 0px 30px rgba(255, 215, 0, 0.7),
                    inset 0px 2px 4px rgba(255, 255, 255, 0.3);
            }
        }

        .roll:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow:
                0px 12px 24px rgba(0, 0, 0, 0.8),
                0px 0px 40px rgba(255, 215, 0, 0.8),
                inset 0px 2px 4px rgba(255, 255, 255, 0.4);
            border-color: #FFF;
        }

        .roll:active {
            transform: translateY(-2px) scale(1.02);
            box-shadow:
                0px 6px 12px rgba(0, 0, 0, 0.7),
                0px 0px 50px rgba(255, 215, 0, 1),
                inset 0px 2px 4px rgba(255, 255, 255, 0.5);
            border-width: 6px;
        }

        .roll:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            animation: none;
        }

        .winners {
            position: fixed;
            bottom: 30px;
            left: 20px;
            width: 100%;
            font-family: 'Roboto', sans-serif;
        }

        .winner2 {
            font-size: 1.5em;
            padding-left: 20px;
            color: #fff;
            float: center;
        }

        text {
            user-select: none;
            pointer-events: none;
            font-family: 'Roboto', sans-serif;
        }

        button {
            cursor: pointer;
        }

        .redBet {
            background: red !important;
            color: #fff;
        }

        .blackBet {
            background: #000 !important;
            color: #fff;
        }

        .red.active {
            box-shadow: 0px 0px 3px #ffc107;
        }

        .active {
            background: #ffc107 !important;
            font-weight: bold;
        }

        .betPlacement {
            width: 95%;
            height: 100%;
        }

        .placeBet:hover>rect {
            fill: rgba(255, 215, 0, 0.3);
        }

        .placeBet.active>rect {
            rx: 5;
            stroke: #ffc107;
            fill: rgba(255, 215, 0, 0.5);
        }

        .placeBet {
            cursor: pointer;
        }

        .placeBet.circle {
            user-select: none;
            pointer-events: none;
        }

        .money {
            position: fixed;
            bottom: 20px;
            left: 20px;
            color: #FFD700;
            font-weight: 900;
            font-family: 'Roboto', sans-serif;
            font-size: 24px;
            padding: 15px 30px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(26, 26, 26, 0.95));
            border: 3px solid #FFD700;
            border-radius: 50px;
            box-shadow:
                0 8px 20px rgba(0, 0, 0, 0.8),
                0 0 30px rgba(255, 215, 0, 0.4),
                inset 0 2px 4px rgba(255, 255, 255, 0.1);
            text-shadow: 0 2px 8px rgba(255, 215, 0, 0.8);
            letter-spacing: 1px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .money::before {
            content: 'ðŸ’°';
            font-size: 28px;
            animation: coin-bounce 2s ease-in-out infinite;
        }

        @keyframes coin-bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-4px);
            }
        }

        .confetti {
            position: fixed;
            user-select: none;
            pointer-events: none;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 1.5em;
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #ff6b6b;
        }

        .chip-selector {
            position: fixed;
            bottom: 20px;
            right: 160px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .chip {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            border: 4px solid #fff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.8);
            transition: all 0.3s;
            font-family: 'Roboto', sans-serif;
        }

        .chip:hover {
            transform: scale(1.15);
        }

        .chip.selected {
            box-shadow: 0 0 30px #FFD700;
            border-color: #FFD700;
            border-width: 5px;
        }

        .chip-1 {
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            color: #000;
        }

        .chip-5 {
            background: linear-gradient(135deg, #DC143C 0%, #8B0000 100%);
            color: white;
        }

        .chip-10 {
            background: linear-gradient(135deg, #1E90FF 0%, #0000CD 100%);
            color: white;
        }

        .chip-25 {
            background: linear-gradient(135deg, #228B22 0%, #006400 100%);
            color: white;
        }

        .chip-100 {
            background: linear-gradient(135deg, #000 0%, #2c2c2c 100%);
            color: #FFD700;
        }

        .bet-info {
            position: fixed;
            bottom: 95px;
            left: 20px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(26, 26, 26, 0.95));
            padding: 15px 30px;
            border-radius: 50px;
            border: 3px solid #FFD700;
            box-shadow:
                0 8px 20px rgba(0, 0, 0, 0.8),
                0 0 30px rgba(255, 215, 0, 0.4);
            color: #FFD700;
            font-family: 'Roboto', sans-serif;
            font-size: 18px;
            font-weight: 900;
            z-index: 100;
        }

        .bet-info-value {
            color: #FFF;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div id="status" class="loading">Loading...</div>

    <div id="game-content" style="display: none;">
        <div class="container">
            <div class="box1">
                <svg id="rouletteWheel" viewBox="0 0 100 100">
                    <title>Spin the wheel!</title>
                    <radialGradient id="board">
                        <stop offset="0%" stop-color="#332701"></stop>
                        <stop offset="50%" stop-color="#ffe69c"></stop>
                        <stop offset="100%" stop-color="#332701"></stop>
                    </radialGradient>
                    <radialGradient id="spinner">
                        <stop offset="0%" stop-color="#dee2e6"></stop>
                        <stop offset="100%" stop-color="#adb5bd"></stop>
                    </radialGradient>
                    <filter id="blur" x="-100%" y="-200%" width="400%" height="400%">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur>
                    </filter>
                    <circle cx="50" cy="50" r="49" fill="url('#board')" stroke="#ffe69c" stroke-width="1"></circle>
                    <circle cx="50" cy="50" r="36" fill="none" stroke="#212529" stroke-width="12"></circle>
                    <circle cx="50" cy="50" r="36" fill="none" stroke="#fff" stroke-width="10.5"></circle>
                    <g id="rotateMe">
                        <g transform="rotate(85.2 50 50)">
                            <circle cx="50" cy="50" r="36" fill="none" stroke="#dc3545" stroke-width="10" stroke-dasharray="5.952"></circle>
                            <circle cx="50" cy="50" r="36" fill="none" stroke="#212529" stroke-width="10" stroke-dasharray="5.952" stroke-dashoffset="5.952"></circle>
                            <circle cx="50" cy="50" r="36" fill="none" stroke="#198754" stroke-width="10" stroke-dasharray="5.952 260 5.952"></circle>
                            <circle cx="50" cy="50" r="36" fill="none" stroke="#198754" stroke-width="10" stroke-dasharray="5.952 260 5.952" transform="rotate(180 50 50)"></circle>
                            <circle cx="50" cy="50" r="22" fill="#d63384"></circle>
                            <g>
                                <rect fill="#212529" height="4" width="30" x="35" y="48" rx="2" filter="url(#blur)"></rect>
                                <rect fill="#212529" height="30" width="4" x="48" y="35" rx="2" filter="url(#blur)"></rect>
                                <rect fill="url('#spinner')" height="4" width="30" x="35" y="48" rx="2"></rect>
                                <rect fill="url('#spinner')" height="30" width="4" x="48" y="35" rx="2"></rect>
                                <circle cx="50" cy="50" r="4" fill="#212529" filter="url(#blur)"></circle>
                                <circle cx="50" cy="50" r="4" fill="url('#spinner')"></circle>
                            </g>
                            <circle cx="50" cy="50" r="35" fill="none" stroke="#212529" stroke-width="0.5"></circle>
                            <circle cx="50" cy="50" r="35" fill="none" stroke="#fff" stroke-width="0.4"></circle>
                            <text id="r" x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs">17</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(9.474 50 50)">5</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(18.947 50 50)">22</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(28.421 50 50)">34</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(37.895 50 50)">15</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(47.368 50 50)">3</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(56.842 50 50)">24</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(66.316 50 50)">36</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(75.789 50 50)">13</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(85.263 50 50)">1</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(94.737 50 50)">00</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(104.211 50 50)">27</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(113.684 50 50)">10</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(123.158 50 50)">25</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(132.632 50 50)">29</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(142.105 50 50)">12</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(151.579 50 50)">8</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(161.053 50 50)">19</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(170.526 50 50)">31</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(180.000 50 50)">18</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(189.474 50 50)">6</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(198.947 50 50)">21</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(208.421 50 50)">33</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(217.895 50 50)">16</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(227.368 50 50)">4</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(236.842 50 50)">23</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(246.316 50 50)">35</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(255.789 50 50)">14</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(265.263 50 50)">2</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(274.737 50 50)">0</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(284.211 50 50)">28</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(293.684 50 50)">9</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(303.158 50 50)">26</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(312.632 50 50)">30</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(322.105 50 50)">11</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(331.579 50 50)">7</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(341.053 50 50)">20</text>
                            <text x="50" y="89" text-anchor="middle" dominant-baseline="middle" font-size="6" fill="#fff" font-weight="900" stroke="#212529" stroke-width="0.1" textLength="4" lengthAdjust="spacingAndGlyphs" transform="rotate(350.526 50 50)">32</text>
                        </g>
                        <animateTransform attributeName="transform" attributeType="XML" type="rotate" values="0 50 50; -360 50 50" dur="10s" begin="0s" repeatCount="indefinite"></animateTransform>
                        <g>
                            <circle cx="50" cy="5" r="2" fill="url('#spinner')" stroke="rgba(0,0,0,0.3)" stroke-width="0.2">
                                <animate class="ball" attributeName="cy" values="5; 17" dur="6s" begin="indefinite" fill="freeze" keyTimes="0;1" keySplines="0.76 0.05 0.98 0.03" calcMode="spline"></animate>
                                <animate class="ball" attributeName="r" values="2;1.8" dur="6s" begin="indefinite" fill="freeze"></animate>
                            </circle>
                            <animateTransform class="ball ballAnim" attributeName="transform" attributeType="XML" type="rotate" values="0 50 50; 1800 50 50" dur="6s" begin="indefinite" fill="freeze" keyTimes="0;1" keySplines="0.05 0.97 0.89 0.98" calcMode="spline"></animateTransform>
                        </g>
                    </g>
                    <circle cx="50" cy="50" r="3.5" fill="#6610f2"></circle>
                    <text id="win" class="winner" font-size="6" x="50" y="50.5" textLength="5" lengthAdjust="spacingAndGlyphs" fill="#ffc107" stroke="#fff" stroke-width="0.05" font-weight="900" text-anchor="middle" dominant-baseline="middle"></text>
                    <use href="#win" transform="translate(40 40)"></use>
                    <use href="#win" transform="translate(-40 40)"></use>
                    <use href="#win" transform="translate(-40 -40)"></use>
                    <use href="#win" transform="translate(40 -40)"></use>
                    <path id="path" d="M 30.2 69.8 A 28 28 0 0 0 69.8 69.8" fill="none"></path>
                    <text font-size="7" fill="#6610f2" textLength="43.9885" lengthAdjust="spacingAndGlyphs">
                        <textPath id="winnerMsg" href="#path" startOffset="0" side="right"></textPath>
                    </text>
                </svg>
            </div>
            <div class="box2">
                <svg viewBox="-1 0 142 51" class="betPlacement">
                    <g class="betBackgrounds">
                        <g id="rd">
                            <circle id="rc" cx="15" cy="5.5" r="4"></circle>
                            <use href="#rc" transform="translate(0 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(0 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(0 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(10 0)" fill="#212529"></use>
                            <use href="#rc" transform="translate(10 10)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(10 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(20 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(20 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(20 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(30 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(30 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(30 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(40 0)" fill="#212529"></use>
                            <use href="#rc" transform="translate(40 10)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(40 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(50 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(50 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(50 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(60 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(60 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(60 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(70 0)" fill="#212529"></use>
                            <use href="#rc" transform="translate(70 10)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(70 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(80 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(80 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(80 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(90 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(90 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(90 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(100 0)" fill="#212529"></use>
                            <use href="#rc" transform="translate(100 10)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(100 20)" fill="#212529"></use>
                            <use href="#rc" transform="translate(110 0)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(110 10)" fill="#212529"></use>
                            <use href="#rc" transform="translate(110 20)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(45 40)" fill="#dc3545"></use>
                            <use href="#rc" transform="translate(65 40)" fill="#212529"></use>
                        </g>
                    </g>
                    <g dominant-baseline="middle" text-anchor="middle" font-size="6" font-weight="900">
                        <g transform="translate(0 0.5)">
                            <g class="placeBet" data-number="3">
                                <rect x="10" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="15" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">3</text>
                            </g>
                            <g class="placeBet" data-number="6">
                                <rect x="20" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="25" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">6</text>
                            </g>
                            <g class="placeBet" data-number="9">
                                <rect x="30" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="35" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">9</text>
                            </g>
                            <g class="placeBet" data-number="12">
                                <rect x="40" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="45" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">12</text>
                            </g>
                            <g class="placeBet" data-number="15">
                                <rect x="50" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="55" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">15</text>
                            </g>
                            <g class="placeBet" data-number="18">
                                <rect x="60" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="65" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">18</text>
                            </g>
                            <g class="placeBet" data-number="21">
                                <rect x="70" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="75" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">21</text>
                            </g>
                            <g class="placeBet" data-number="24">
                                <rect x="80" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="85" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">24</text>
                            </g>
                            <g class="placeBet" data-number="27">
                                <rect x="90" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="95" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">27</text>
                            </g>
                            <g class="placeBet" data-number="30">
                                <rect x="100" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="105" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">30</text>
                            </g>
                            <g class="placeBet" data-number="33">
                                <rect x="110" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="115" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">33</text>
                            </g>
                            <g class="placeBet" data-number="36">
                                <rect x="120" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="125" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">36</text>
                            </g>
                        </g>
                        <g transform="translate(0 10.5)">
                            <g class="placeBet" data-number="2">
                                <rect x="10" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="15" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">2</text>
                            </g>
                            <g class="placeBet" data-number="5">
                                <rect x="20" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="25" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">5</text>
                            </g>
                            <g class="placeBet" data-number="8">
                                <rect x="30" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="35" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">8</text>
                            </g>
                            <g class="placeBet" data-number="11">
                                <rect x="40" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="45" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">11</text>
                            </g>
                            <g class="placeBet" data-number="14">
                                <rect x="50" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="55" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">14</text>
                            </g>
                            <g class="placeBet" data-number="17">
                                <rect x="60" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="65" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">17</text>
                            </g>
                            <g class="placeBet" data-number="20">
                                <rect x="70" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="75" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">20</text>
                            </g>
                            <g class="placeBet" data-number="23">
                                <rect x="80" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="85" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">23</text>
                            </g>
                            <g class="placeBet" data-number="26">
                                <rect x="90" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="95" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">26</text>
                            </g>
                            <g class="placeBet" data-number="29">
                                <rect x="100" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="105" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">29</text>
                            </g>
                            <g class="placeBet" data-number="32">
                                <rect x="110" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="115" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">32</text>
                            </g>
                            <g class="placeBet" data-number="35">
                                <rect x="120" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="125" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">35</text>
                            </g>
                        </g>
                        <g transform="translate(0 20.5)">
                            <g class="placeBet" data-number="1">
                                <rect x="10" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="15" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">1</text>
                            </g>
                            <g class="placeBet" data-number="4">
                                <rect x="20" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="25" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">4</text>
                            </g>
                            <g class="placeBet" data-number="7">
                                <rect x="30" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="35" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="4">7</text>
                            </g>
                            <g class="placeBet" data-number="10">
                                <rect x="40" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="45" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">10</text>
                            </g>
                            <g class="placeBet" data-number="13">
                                <rect x="50" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="55" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">13</text>
                            </g>
                            <g class="placeBet" data-number="16">
                                <rect x="60" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="65" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">16</text>
                            </g>
                            <g class="placeBet" data-number="19">
                                <rect x="70" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="75" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">19</text>
                            </g>
                            <g class="placeBet" data-number="22">
                                <rect x="80" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="85" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">22</text>
                            </g>
                            <g class="placeBet" data-number="25">
                                <rect x="90" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="95" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">25</text>
                            </g>
                            <g class="placeBet" data-number="28">
                                <rect x="100" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="105" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">28</text>
                            </g>
                            <g class="placeBet" data-number="31">
                                <rect x="110" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="115" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">31</text>
                            </g>
                            <g class="placeBet" data-number="34">
                                <rect x="120" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="125" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="6" lengthAdjust="spacingAndGlyphs">34</text>
                            </g>
                        </g>
                        <g transform="translate(0 30.5)">
                            <g class="placeBet firstThird" data-bet="1st-12">
                                <rect x="10" height="10" width="40" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="30" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="12" lengthAdjust="spacingAndGlyphs">1st 12</text>
                            </g>
                            <g class="placeBet secondThird" data-bet="2nd-12">
                                <rect x="50" height="10" width="40" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="70" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="12" lengthAdjust="spacingAndGlyphs">2nd 12</text>
                            </g>
                            <g class="placeBet lastThird" data-bet="3rd-12">
                                <rect x="90" height="10" width="40" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="110" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="12" lengthAdjust="spacingAndGlyphs">3rd 12</text>
                            </g>
                        </g>
                        <g transform="translate(0 40.5)">
                            <g class="placeBet firstHalf" data-bet="1-18">
                                <rect x="10" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="20" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="14" lengthAdjust="spacingAndGlyphs">1 to 18</text>
                            </g>
                            <g class="placeBet even" data-bet="even">
                                <rect x="30" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="40" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="12" lengthAdjust="spacingAndGlyphs">EVEN</text>
                            </g>
                            <g class="placeBet red" data-bet="red">
                                <rect x="50" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="60" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="10" lengthAdjust="spacingAndGlyphs">RED</text>
                            </g>
                            <g class="placeBet black" data-bet="black">
                                <rect x="70" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="80" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="14" lengthAdjust="spacingAndGlyphs">BLACK</text>
                            </g>
                            <g class="placeBet odd" data-bet="odd">
                                <rect x="90" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="100" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="10" lengthAdjust="spacingAndGlyphs">ODD</text>
                            </g>
                            <g class="placeBet secondHalf" data-bet="19-36">
                                <rect x="110" height="10" width="20" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text x="120" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="14" lengthAdjust="spacingAndGlyphs">19 to 36</text>
                            </g>
                        </g>
                        <g>
                            <g class="placeBet" data-number="00">
                                <rect x="0" y="0.5" height="15" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text transform="rotate(-90 10 10)" x="12" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="10" lengthAdjust="spacingAndGlyphs">00</text>
                            </g>
                            <g class="placeBet" data-number="0">
                                <rect y="15.5" height="15" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text transform="rotate(-90 10 10)" x="-2.5" y="5.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="5" lengthAdjust="spacingAndGlyphs">0</text>
                            </g>
                        </g>
                        <g class="two2oneColumns">
                            <g class="placeBet two2one" data-bet="col-3">
                                <rect x="130" y="0.5" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text transform="rotate(-90 10 10)" x="14.5" y="135.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="7" lengthAdjust="spacingAndGlyphs">2 to 1</text>
                            </g>
                            <g class="placeBet two2one" data-bet="col-2">
                                <rect x="130" y="10.5" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text transform="rotate(-90 10 10)" x="4.5" y="135.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="7" lengthAdjust="spacingAndGlyphs">2 to 1</text>
                            </g>
                            <g class="placeBet two2one" data-bet="col-1">
                                <rect x="130" y="20.5" height="10" width="10" fill="rgba(0,0,0,0)" stroke="#fff" stroke-width="0.5"></rect>
                                <text transform="rotate(-90 10 10)" x="-5.5" y="135.5" fill="#fff" stroke="#212529" stroke-width="0.1" textLength="7" lengthAdjust="spacingAndGlyphs">2 to 1</text>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
        </div>
        <div class="winners"></div>
        <button class="roll" id="roll-btn" title="Spin the wheel!" onclick="spinWheel()">
            <span>ROLL</span>
        </button>
        <span class="money" id="balance">100</span>

        <div class="chip-selector">
            <div class="chip chip-1 selected" data-chip="1" onclick="selectChip(1)">1â‚¾</div>
            <div class="chip chip-5" data-chip="5" onclick="selectChip(5)">5â‚¾</div>
            <div class="chip chip-10" data-chip="10" onclick="selectChip(10)">10â‚¾</div>
            <div class="chip chip-25" data-chip="25" onclick="selectChip(25)">25â‚¾</div>
            <div class="chip chip-100" data-chip="100" onclick="selectChip(100)">100â‚¾</div>
        </div>

        <button class="roll" id="clear-btn" title="Clear all bets" onclick="clearBets()" style="bottom: 200px; right: 40px; width: 60px; height: 60px; font-size: 12px; background: linear-gradient(135deg, #DC143C 0%, #8B0000 100%);">
            <span>CLEAR</span>
        </button>

        <div class="bet-info">
            Total Bet: <span class="bet-info-value" id="total-bet">0â‚¾</span>
        </div>

        <span class="confetti"></span>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/leimapapa/vectorfetti/vectorfettiBeta.js"></script>
    <script>
        const BACKEND_URL = 'http://localhost:8080';

        // American Roulette wheel order (00 represented as string in display, as number for logic)
        let nums = ["00", 27, 10, 25, 29, 12, 8, 19, 31, 18, 6, 21, 33, 16, 4, 23, 35, 14, 2, 0, 28, 9, 26, 30, 11, 7, 20, 32, 17, 5, 22, 34, 15, 3, 24, 36, 13, 1];
        let two2oneNums = [
            [3, 6, 9, 12, 15, 18, 21, 24, 27, 30, 33, 36],
            [2, 5, 8, 11, 14, 17, 20, 23, 26, 29, 32, 35],
            [1, 4, 7, 10, 13, 16, 19, 22, 25, 28, 31, 34]
        ];
        let thirdsNums = [
            [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
            [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
            [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36]
        ];
        let redNums = [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36];
        let blackNums = [2, 4, 6, 8, 10, 11, 13, 15, 17, 20, 22, 24, 26, 28, 29, 31, 33, 35];
        let oddNums = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35];
        let evenNums = [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36];
        let firstHalfNums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18];
        let secondHalfNums = [19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36];

        let balance = 0;
        let sessionToken = '';
        let isDemo = false;
        let gameId = null;
        let jwtToken = '';
        let isSpinning = false;
        let currentChip = 1;
        let bets = {};
        let totalBet = 0;

        const roll = document.querySelector(".roll");
        const wheel = document.querySelector("#rouletteWheel");
        const ballAnim = document.querySelector(".ballAnim");
        const balls = document.querySelectorAll(".ball");
        const betBtnsSVG = document.querySelectorAll(".placeBet");

        // Get params from URL
        const urlParams = new URLSearchParams(window.location.search);
        sessionToken = urlParams.get('session') || '';
        isDemo = urlParams.get('demo') === 'true';
        jwtToken = urlParams.get('token') || '';

        const randInt = (min, max) => {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        };

        // Add bet click handlers
        betBtnsSVG.forEach(btn => {
            btn.addEventListener("click", evt => {
                if (!isSpinning) {
                    placeBet(btn);
                }
            });
        });

        function selectChip(value) {
            currentChip = value;
            document.querySelectorAll('.chip').forEach(chip => {
                chip.classList.remove('selected');
            });
            document.querySelector(`[data-chip="${value}"]`).classList.add('selected');
        }

        function placeBet(betElement) {
            const betKey = betElement.dataset.number || betElement.dataset.bet;
            if (!betKey) return;

            if (balance < currentChip) {
                alert('Insufficient balance!');
                return;
            }

            // Add or update bet
            if (!bets[betKey]) {
                bets[betKey] = 0;
            }
            bets[betKey] += currentChip;
            totalBet += currentChip;

            // Visual feedback
            betElement.classList.add('active');

            updateBetInfo();
        }

        function updateBetInfo() {
            document.getElementById('total-bet').textContent = totalBet + 'â‚¾';
        }

        function clearBets() {
            bets = {};
            totalBet = 0;
            document.querySelectorAll('.placeBet').forEach(bet => {
                bet.classList.remove('active');
            });
            updateBetInfo();
        }

        async function init() {
            const statusEl = document.getElementById('status');

            console.log('=== ROULETTE INIT ===');
            console.log('Session Token:', sessionToken);
            console.log('Is Demo:', isDemo);

            if (isDemo) {
                console.log('Starting in DEMO mode');
                balance = 100;
                updateMoney();
                showGame();
                return;
            }

            if (!sessionToken) {
                console.error('NO SESSION TOKEN!');
                statusEl.innerHTML = '<div class="error">No session token found</div>';
                return;
            }

            // Real money mode
            try {
                const balanceUrl = `${BACKEND_URL}/api/user/balance?sessionToken=${sessionToken}`;
                console.log('Fetching balance from:', balanceUrl);

                const response = await fetch(balanceUrl);
                console.log('Balance response status:', response.status);

                if (response.ok) {
                    const data = await response.json();
                    console.log('Balance data:', data);
                    balance = data.balance;
                    updateMoney();

                    // Fetch game info
                    const gameInfoUrl = `${BACKEND_URL}/api/user/game-info?sessionToken=${sessionToken}`;
                    const gameInfoResponse = await fetch(gameInfoUrl);
                    if (gameInfoResponse.ok) {
                        const gameData = await gameInfoResponse.json();
                        gameId = gameData.gameId;
                    }

                    showGame();
                } else {
                    const errorText = await response.text();
                    console.error('Balance fetch failed:', errorText);
                    statusEl.innerHTML = `<div class="error">Failed to load balance: ${response.status}</div>`;
                }
            } catch (error) {
                console.error('Init error:', error);
                statusEl.innerHTML = '<div class="error">Connection error. Starting in demo mode...</div>';
                isDemo = true;
                balance = 100;
                setTimeout(() => {
                    updateMoney();
                    showGame();
                }, 2000);
            }
        }

        function showGame() {
            document.getElementById('status').style.display = 'none';
            document.getElementById('game-content').style.display = 'block';
        }

        function updateMoney() {
            document.querySelector(".money").innerHTML = balance.toFixed(2);
        }

        async function spinWheel() {
            if (isSpinning) return;

            // Check bets
            if (totalBet === 0) {
                alert('Place your bets!');
                return;
            }

            if (balance < totalBet) {
                alert('Insufficient balance!');
                return;
            }

            isSpinning = true;
            roll.disabled = true;

            // Empty messages
            document.querySelector(".winner").textContent = "";
            document.querySelector("#winnerMsg").textContent = ``;

            // Generate random angle between 1800 and 3600 (5-10 spins)
            const winAngle = randInt(1800, 3600);

            // Set ball animation to this angle
            ballAnim.setAttribute("values", `0 50 50; ${winAngle} 50 50`);

            // Calculate which number the ball will land on
            // The wheel rotates counter-clockwise (-360 per 10s)
            // Ball rotates clockwise (winAngle)
            const index = Math.round(winAngle / (360 / 38)) % 38;
            const winNumber = nums[index];
            const winNumberInt = winNumber === "00" ? 37 : parseInt(winNumber);

            try {
                if (isDemo) {
                    // Demo mode - deduct bet
                    balance -= totalBet;
                    updateMoney();
                } else {
                    // Real money mode - backend call
                    const roundId = 'round_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

                    if (!jwtToken) {
                        throw new Error('No authentication token found');
                    }

                    const response = await fetch(`${BACKEND_URL}/api/user/games/spin`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${jwtToken}`
                        },
                        body: JSON.stringify({
                            sessionToken: sessionToken,
                            gameId: gameId,
                            betAmount: totalBet,
                            roundId: roundId
                        })
                    });

                    if (!response.ok) {
                        throw new Error('Spin failed');
                    }

                    const data = await response.json();
                    console.log('Spin result:', data);
                    balance = data.newBalance;
                }

                // Start animations
                balls.forEach(ball => {
                    ball.beginElement();
                }, false);

                // Wait for animation to complete
                balls[0].addEventListener('endEvent', async function handler(event) {
                    balls[0].removeEventListener('endEvent', handler);

                    let totalWinnings = 0;
                    let isWinner = false;

                    // Check individual number bets (35:1 payout)
                    if (bets[winNumber] || bets[winNumber.toString()]) {
                        const betAmount = bets[winNumber] || bets[winNumber.toString()];
                        totalWinnings += betAmount * 36; // bet Ã— 36 (35:1 + original bet)
                        isWinner = true;
                    }

                    // Check outside bets
                    const checkWinner = (betType, arr, payoutMultiplier) => {
                        if (bets[betType]) {
                            if (arr.includes(winNumberInt)) {
                                totalWinnings += bets[betType] * payoutMultiplier;
                                isWinner = true;
                            }
                        }
                    };

                    checkWinner('red', redNums, 2);
                    checkWinner('black', blackNums, 2);
                    checkWinner('even', evenNums, 2);
                    checkWinner('odd', oddNums, 2);
                    checkWinner('1-18', firstHalfNums, 2);
                    checkWinner('19-36', secondHalfNums, 2);
                    checkWinner('1st-12', thirdsNums[0], 3);
                    checkWinner('2nd-12', thirdsNums[1], 3);
                    checkWinner('3rd-12', thirdsNums[2], 3);
                    checkWinner('col-3', two2oneNums[0], 3);
                    checkWinner('col-2', two2oneNums[1], 3);
                    checkWinner('col-1', two2oneNums[2], 3);

                    if (isDemo && totalWinnings > 0) {
                        balance += totalWinnings;
                    }

                    updateMoney();

                    // Show winner number
                    document.querySelector(".winner").textContent = winNumber;

                    if (isWinner) {
                        win();
                    } else {
                        lose();
                    }

                    // Clear bets after 3 seconds
                    setTimeout(() => {
                        clearBets();
                        isSpinning = false;
                        roll.disabled = false;
                    }, 3000);
                });

            } catch (error) {
                console.error('Spin error:', error);
                alert('Error during spin');

                isSpinning = false;
                roll.disabled = false;
            }
        }

        function win() {
            document.querySelector("#winnerMsg").textContent = `Winner!`;
            // confetti!
            confetti(document.querySelector(".confetti"), {
                spread: window.innerWidth
            });
        }

        function lose() {
            document.querySelector("#winnerMsg").textContent = `House wins`;
        }

        // Initialize on load
        window.onload = init;
    </script>
</body>
</html>
